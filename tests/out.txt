============================= test session starts ==============================
platform linux -- Python 3.12.3, pytest-8.3.5, pluggy-1.5.0
rootdir: /home/nhn/cranebot3-firmware/tests
collected 1 item

integration_test.py Setting camera poses to 
[[  3.    3.    2.5 135.  -28.    0. ]
 [  3.   -3.    2.5  45.  -28.    0. ]
 [ -3.    3.    2.5 225.  -28.    0. ]
 [ -3.   -3.    2.5 315.  -28.    0. ]]
RPiCamVidMock server listening on ('127.0.0.1', 8888) play with ffplay tcp://127.0.0.1:8888
RPiCamVidMock server listening on ('127.0.0.1', 8889) play with ffplay tcp://127.0.0.1:8889
RPiCamVidMock server listening on ('127.0.0.1', 8890) play with ffplay tcp://127.0.0.1:8890
RPiCamVidMock server listening on ('127.0.0.1', 8891) play with ffplay tcp://127.0.0.1:8891
get services list
start service browser
Service 123.cranebot-anchor-service.test_1._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Added
Service 123.cranebot-anchor-service.test_0._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Added
Service 123.cranebot-anchor-service.test_2._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Added
Service 123.cranebot-anchor-service.test_3._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Added
Service 123.cranebot-gripper-service.test._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Added
start observer's queue listener task
Service 123.cranebot-anchor-service.test_1._http._tcp.local. added, service info: AsyncServiceInfo(type='_http._tcp.local.', name='123.cranebot-anchor-service.test_1._http._tcp.local.', addresses=[b'\x7f\x00\x00\x01'], port=8766, weight=0, priority=0, server='123.cranebot-anchor-service.test_1.', properties={}, interface_index=None), type: _http._tcp.local.
appending anchor client to list and starting server
Service 123.cranebot-anchor-service.test_0._http._tcp.local. added, service info: AsyncServiceInfo(type='_http._tcp.local.', name='123.cranebot-anchor-service.test_0._http._tcp.local.', addresses=[b'\x7f\x00\x00\x01'], port=8765, weight=0, priority=0, server='123.cranebot-anchor-service.test_0.', properties={}, interface_index=None), type: _http._tcp.local.
appending anchor client to list and starting server
Service 123.cranebot-anchor-service.test_2._http._tcp.local. added, service info: AsyncServiceInfo(type='_http._tcp.local.', name='123.cranebot-anchor-service.test_2._http._tcp.local.', addresses=[b'\x7f\x00\x00\x01'], port=8767, weight=0, priority=0, server='123.cranebot-anchor-service.test_2.', properties={}, interface_index=None), type: _http._tcp.local.
appending anchor client to list and starting server
Service 123.cranebot-anchor-service.test_3._http._tcp.local. added, service info: AsyncServiceInfo(type='_http._tcp.local.', name='123.cranebot-anchor-service.test_3._http._tcp.local.', addresses=[b'\x7f\x00\x00\x01'], port=8768, weight=0, priority=0, server='123.cranebot-anchor-service.test_3.', properties={}, interface_index=None), type: _http._tcp.local.
appending anchor client to list and starting server
Service 123.cranebot-gripper-service.test._http._tcp.local. added, service info: AsyncServiceInfo(type='_http._tcp.local.', name='123.cranebot-gripper-service.test._http._tcp.local.', addresses=[b'\x7f\x00\x00\x01'], port=8764, weight=0, priority=0, server='123.cranebot-gripper-service.test.', properties={}, interface_index=None), type: _http._tcp.local.
Starting position estimator
Connecting to ws://127.0.0.1:8766...
Connecting to ws://127.0.0.1:8765...
Connecting to ws://127.0.0.1:8767...
Connecting to ws://127.0.0.1:8768...
Connecting to ws://127.0.0.1:8764...
Anchor server is configured to use mock camera on localhost:8889
Anchor server is configured to use mock camera on localhost:8888
Anchor server is configured to use mock camera on localhost:8890
Anchor server is configured to use mock camera on localhost:8891
Connected to ws://127.0.0.1:8766.
receive loop
Connected to ws://127.0.0.1:8765.
receive loop
Connected to ws://127.0.0.1:8767.
receive loop
Connected to ws://127.0.0.1:8768.
receive loop
Connected to ws://127.0.0.1:8764.
receive loop
got a video ready update {'video_ready': 8889, 'line_record': [[1755434563.8769886, 8.723937439107385, 0.0, True]]}
Connecting to tcp://127.0.0.1:8889
got a video ready update {'video_ready': 8888, 'line_record': [[1755434563.8769374, 8.65931569525589, 0.0, True]]}
Connecting to tcp://127.0.0.1:8888
got a video ready update {'video_ready': 8890, 'line_record': [[1755434563.8934746, 8.723937439107385, 0.0, True]]}
Connecting to tcp://127.0.0.1:8890
got a video ready update {'video_ready': 8891, 'line_record': [[1755434563.816961, 8.723937439107385, 0.0, True], [1755434563.9072392, 8.723937439107385, 0.0, True]]}
Connecting to tcp://127.0.0.1:8891
Client ('127.0.0.1', 42884) connected to mock camera on camera 0
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.23348310176900622
       x: [ 2.633e-01  1.823e-01  6.801e-03  4.463e-02  9.990e-01
            6.902e-02  9.976e-01]
     nit: 5
     jac: [-9.954e+05  5.229e-02 -3.253e-02  2.124e-02  8.593e-03
           -8.680e-06 -2.212e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.2411678904112013
       x: [ 2.633e-01  1.823e-01  6.801e-03  4.463e-02  9.990e-01
            6.902e-02  9.976e-01]
     nit: 5
     jac: [-9.604e+05  3.431e-02 -3.673e-02  2.229e-02  5.265e-03
           -7.676e-05 -2.451e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.24865681799869876
       x: [ 2.633e-01  1.823e-01  6.801e-03  4.463e-02  9.990e-01
            6.902e-02  9.976e-01]
     nit: 5
     jac: [-8.370e+05  1.546e-02 -3.683e-02  2.197e-02  1.840e-03
           -1.488e-04 -2.408e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.25649776036604977
       x: [ 2.633e-01  1.823e-01  6.801e-03  4.463e-02  9.990e-01
            6.902e-02  9.976e-01]
     nit: 5
     jac: [-6.323e+05 -2.119e-03 -3.276e-02  2.029e-02 -1.293e-03
           -2.133e-04 -2.085e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.26521980730321837
       x: [ 2.633e-01  1.823e-01  6.801e-03  4.463e-02  9.990e-01
            6.902e-02  9.976e-01]
     nit: 5
     jac: [-3.668e+05 -1.605e-02 -2.517e-02  1.733e-02 -3.703e-03
           -2.601e-04 -1.536e-04]
    nfev: 8
    njev: 1
video connection successful < cv2.VideoCapture 0x7bac188a8110>
Client ('127.0.0.1', 46698) connected to mock camera on camera 2
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.39540592046696155
       x: [ 2.633e-01  1.406e-01  2.194e-03  3.202e-02  9.999e-01
            5.635e-02  9.985e-01]
     nit: 5
     jac: [ 2.887e+05  1.752e-05 -2.152e-04  1.682e-03 -5.141e-05
           -6.873e-05  3.409e-06]
    nfev: 8
    njev: 1
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.4521757381102215
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [-6.049e+04 -1.396e-02  3.598e-03  7.792e-03 -1.998e-03
           -8.424e-04  1.540e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.4625364869050175
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [ 1.125e+05 -2.529e-02  1.251e-02  5.516e-03 -3.114e-03
           -9.594e-04  3.732e-04]
    nfev: 8
    njev: 1
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.4749621161889359
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [ 2.360e+05 -1.843e-02  2.276e-02  2.842e-03 -2.200e-03
           -8.728e-04  6.072e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.4890342066749056
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [ 2.216e+05  5.681e-03  2.757e-02  1.512e-03  5.376e-04
           -6.404e-04  7.012e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.5031705660341458
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [ 7.808e+04  3.238e-02  2.413e-02  2.527e-03  3.423e-03
           -4.103e-04  6.014e-04]
    nfev: 8
    njev: 1
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.5157124115613104
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [-9.485e+04  4.473e-02  1.471e-02  5.120e-03  4.632e-03
           -3.121e-04  3.718e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.5261275046605882
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [-1.941e+05  3.772e-02  4.454e-03  7.521e-03  3.718e-03
           -3.942e-04  1.372e-04]
    nfev: 8
    njev: 1
 message: Positive directional derivative for linesearch
 success: False
  status: 8
     fun: 0.5351986427378066
       x: [ 2.633e-01  1.101e-01  2.344e-02  5.875e-02  9.983e-01
            8.212e-02  9.966e-01]
     nit: 5
     jac: [-1.764e+05  1.868e-02 -1.263e-03  8.475e-03  1.561e-03
           -6.133e-04  2.085e-05]
    nfev: 8
    njev: 1
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 0, 0]
video connection successful < cv2.VideoCapture 0x7bac188a8450>
Client ('127.0.0.1', 36972) connected to mock camera on camera 1
Waiting for enough origin card detections from every anchor camera [12, 0, 5, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
video connection successful < cv2.VideoCapture 0x7bab8835e610>
Waiting for enough origin card detections from every anchor camera [12, 0, 12, 0]
Client ('127.0.0.1', 43444) connected to mock camera on camera 3
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 0]
video connection successful < cv2.VideoCapture 0x7bac188aa1b0>
Waiting for enough origin card detections from every anchor camera [12, 12, 12, 7]
locating anchor 0 from 12 detections
locating anchor 1 from 12 detections
locating anchor 2 from 12 detections
locating anchor 3 from 12 detections
Provisional anchor points relative to origin card [[ 2.93084125  3.01877687  2.40618135]
 [ 3.04547601 -2.92828191  2.41047137]
 [-3.03479093  2.92848696  2.40156945]
 [-2.91774436 -3.03797948  2.39691852]]
Tightening all lines
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry now that its still and lines are tight
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
the visual position of the gantry is [0.55617701 0.52898756 0.98565738]
Line lengths from coarse calibration =[3.72236073 4.49215055 4.54504732 5.17523348]
Maximum allowed height of gantry sample point 1.198459261026385
Generated 20 sample positions to visit during calibration
Ordered points for near-optimal travel. total distance = 12.083482802675052 m
Collect data at each position
Moving to point 1/20 at [ 1.47701137 -0.91492676  1.11907347]
move_direction_speed. start=[0.61162054 0.44526084 0.98542527] direction=[ 0.53679321 -0.84371066 -0.00231902], line_speed=[ 0.02356691 -0.0944884   0.08727679 -0.02111829]
Gantry pose updated to: Pos(1.48,-0.91,1.12), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.02356567 -0.09449113  0.08727438 -0.02111842] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 13, 14 visual observations of gantry pose
Moving to point 2/20 at [ 1.12097357 -0.64079346  0.66895691]
move_direction_speed. start=[ 1.3623404  -0.80731533  1.6854634 ] direction=[-0.21038736  0.14514876 -0.96678281], line_speed=[ 0.01005188  0.04723598 -0.01417286  0.00125307]
Gantry pose updated to: Pos(1.12,-0.64,0.67), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.01005166  0.0472353  -0.01417292  0.        ] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 3/20 at [ 1.12542138 -0.27607039  0.34403806]
move_direction_speed. start=[ 1.06526617 -0.55387539  0.8986944 ] direction=[ 0.08908569  0.41141    -0.9070863 ], line_speed=[-0.0073976   0.06221292  0.00440282  0.05481236]
Gantry pose updated to: Pos(1.13,-0.28,0.34), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[0.         0.06221173 0.         0.05481142] tight=[1. 1. 1. 1.]
wait for tension speeds=[0.         0.06221173 0.         0.05481142] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 4/20 at [1.51908489 1.44622859 0.69500604]
move_direction_speed. start=[ 1.12127843 -0.16295201  0.38147912] direction=[0.23872529 0.96567589 0.10237343], line_speed=[-0.08898418  0.0499865  -0.04032283  0.06550517]
Gantry pose updated to: Pos(1.52,1.45,0.70), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[-0.0890002   0.04998572 -0.04032334  0.06550381] tight=[1. 1. 1. 1.]
wait for tension speeds=[-0.0890002   0.04998572 -0.04032334  0.06550381] tight=[1. 1. 1. 1.]
wait for tension speeds=[-0.08900012  0.04998572 -0.04032334  0.06550381] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 5/20 at [1.27387163 1.24508728 0.29314499]
move_direction_speed. start=[1.53331292 1.44212745 0.75206047] direction=[-0.42755588 -0.32471965 -0.84365462], line_speed=[ 0.09327547  0.0117483  -0.00253628 -0.03088247]
Gantry pose updated to: Pos(1.27,1.25,0.29), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.09325728  0.01174826  0.         -0.03088277] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 6/20 at [1.29379928 0.86429712 0.6461559 ]
move_direction_speed. start=[1.29457971 1.15372965 0.37996971] direction=[-0.00212261 -0.78719214  0.61670417], line_speed=[ 0.00537551 -0.09152616  0.00178872 -0.07291661]
Gantry pose updated to: Pos(1.29,0.86,0.65), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.         -0.09152877  0.         -0.07291829] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 7/20 at [0.79629742 0.39250411 0.8451135 ]
move_direction_speed. start=[1.22523646 0.78108309 0.73285499] direction=[-0.73752991 -0.66813368  0.09821921], line_speed=[ 0.07849075 -0.03018482 -0.03786787 -0.09824925]
Gantry pose updated to: Pos(0.80,0.39,0.85), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.07847737 -0.0301851  -0.03786832 -0.09825227] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.0784773  -0.0301851  -0.03786832 -0.09825227] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 8/20 at [ 0.73803666 -0.05213599  0.72726573]
move_direction_speed. start=[0.7674558  0.23224612 0.83785156] direction=[-0.0920197  -0.88951481 -0.44754416], line_speed=[ 0.08723075 -0.04611043  0.05519224 -0.0500746 ]
Gantry pose updated to: Pos(0.74,-0.05,0.73), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.08721366 -0.04611108  0.05519128 -0.05007539] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.08721356 -0.04611108  0.05519128 -0.05007539] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 9/20 at [ 0.20596307 -0.08993552  0.93770702]
move_direction_speed. start=[ 0.63488067 -0.11970944  0.7482824 ] direction=[-0.94604233  0.06567084  0.31731883], line_speed=[ 0.0330076   0.04679112 -0.08341762 -0.07603139]
Gantry pose updated to: Pos(0.21,-0.09,0.94), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.0330051   0.04679044 -0.08341979 -0.07603319] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.03300509  0.04679044 -0.08341979 -0.07603318] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 10/20 at [-0.49089036  0.31809803  0.61991475]
move_direction_speed. start=[ 0.07539299 -0.05731927  0.93517479] direction=[-0.72598928  0.48129429 -0.49121825], line_speed=[ 0.02853713  0.09711602 -0.06594145 -0.00157416]
Gantry pose updated to: Pos(-0.49,0.32,0.62), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.02853522  0.09711307 -0.0659428   0.        ] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.02853522  0.09711307 -0.0659428   0.        ] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.02853521  0.09711306 -0.06594279  0.        ] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 11/20 at [-0.56608624 -0.12019216  0.44810682]
move_direction_speed. start=[-0.54357426  0.23762258  0.63982982] direction=[-0.05270132 -0.83765671 -0.54364861], line_speed=[ 0.0720315  -0.03028876  0.07518624 -0.04429986]
Gantry pose updated to: Pos(-0.57,-0.12,0.45), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.07201896 -0.03028905  0.07518448 -0.04430047] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.07201896 -0.03028905  0.07518448 -0.04430047] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 12/20 at [-1.06033164 -0.02811461  0.65616866]
move_direction_speed. start=[-0.66834422 -0.12330948  0.48745053] direction=[-0.92770974  0.22529604  0.29765136], line_speed=[ 0.03918841  0.06908203 -0.08051372 -0.04910097]
Gantry pose updated to: Pos(-1.06,-0.03,0.66), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.03918462  0.06908053 -0.08051572 -0.04910171] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.03918462  0.06908053 -0.08051572 -0.04910171] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 13/20 at [-1.06312916  0.08662739  0.91556587]
move_direction_speed. start=[-1.0915167   0.01714969  0.77628757] direction=[0.20221779 0.49492229 0.84507981], line_speed=[-0.07015007 -0.0151584  -0.06351618  0.01182542]
Gantry pose updated to: Pos(-1.06,0.09,0.92), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[-0.07016215 -0.01515847 -0.06351743  0.01182538] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 14/20 at [-1.05985658 -0.18139993  0.99934695]
move_direction_speed. start=[-1.06765281  0.01609495  0.97156427] direction=[ 0.03943738 -0.99903186  0.01949448], line_speed=[ 0.05340848 -0.0601571   0.07746601 -0.07867913]
Gantry pose updated to: Pos(-1.06,-0.18,1.00), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.05340147 -0.06015823  0.07746416 -0.07868104] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 15/20 at [-0.91082735 -0.52427055  0.98217404]
move_direction_speed. start=[-1.01607863 -0.32877776  0.9949575 ] direction=[ 0.46706668 -0.86752547 -0.17102127], line_speed=[ 0.02338974 -0.07818868  0.09816961 -0.03522246]
Gantry pose updated to: Pos(-0.91,-0.52,0.98), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.02338838 -0.07819151  0.09816518 -0.03522284] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 16/20 at [-1.18030504 -1.11542496  0.50091904]
move_direction_speed. start=[-0.88808538 -0.69949754  0.91846072] direction=[-0.41873316 -0.59599892 -0.68516262], line_speed=[ 0.0871461   0.02719482  0.05017303 -0.03712128]
Gantry pose updated to: Pos(-1.18,-1.12,0.50), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.08712608  0.02719459  0.05017224 -0.03712171] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.08712608  0.02719459  0.05017224 -0.03712171] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 17/20 at [-1.42285553 -1.30458233  0.53776049]
move_direction_speed. start=[-1.257302   -1.20695905  0.52533575] direction=[-0.85999747 -0.50712164 -0.05685063], line_speed=[ 0.09368207  0.05799344  0.01283726 -0.07332087]
Gantry pose updated to: Pos(-1.42,-1.30,0.54), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.0936585   0.05799239  0.01283721 -0.07332252] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 18/20 at [-0.97994941  0.56849549  0.22215599]
move_direction_speed. start=[-1.46169982 -1.25296787  0.50896898] direction=[ 0.24877994  0.94061894 -0.2309644 ], line_speed=[-0.07321086  0.01634282 -0.06458929  0.0826442 ]
Gantry pose updated to: Pos(-0.98,0.57,0.22), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[-0.07322381  0.01634273 -0.06459057  0.08264208] tight=[1. 1. 1. 1.]
wait for tension speeds=[-0.07322374  0.01634273 -0.06459057  0.08264208] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 19/20 at [-1.12701204  0.71578932  0.54714167]
move_direction_speed. start=[-1.00959934  0.67762359  0.52318637] direction=[-0.94991946  0.30877722  0.04805882], line_speed=[ 0.05846011  0.08460018 -0.0766093  -0.01755806]
Gantry pose updated to: Pos(-1.13,0.72,0.55), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[ 0.05845185  0.08459792 -0.07661111 -0.01755815] tight=[1. 1. 1. 1.]
wait for tension speeds=[ 0.05845182  0.08459792 -0.07661111 -0.01755815] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Moving to point 20/20 at [-1.20967824  0.755855    0.56243448]
move_direction_speed. start=[-1.21796211  0.75619594  0.54029171] direction=[-0.45931379  0.01890397 -0.8880729 ], line_speed=[0.06876071 0.06160759 0.02153287 0.01958445]
Gantry pose updated to: Pos(-1.21,0.76,0.56), Hpr(0.00,0.00,0.00)
Tightening all lines
wait for tension speeds=[0.06874918 0.06160639 0.02153273 0.01958434] tight=[1. 1. 1. 1.]
wait for tension speeds=[0.06874912 0.06160639 0.02153273 0.01958434] tight=[1. 1. 1. 1.]
wait for tension speeds=[0. 0. 0. 0.] tight=[1. 1. 1. 1.]
Collecting observations of gantry
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Tightening successful on attempt 1.
Collected 14, 14, 14, 14 visual observations of gantry pose
Completed data collection. Performing optimization of calibration parameters.
obtained result from find_cal_params (array([[[ 6.81134948e-02,  1.03814115e-01, -6.61901998e-01],
        [ 2.57181219e+00,  3.23314602e+00,  2.43833148e+00]],

       [[-2.06428984e-01, -1.58545095e-01, -2.18717980e+00],
        [ 3.61040632e+00, -2.12066920e+00,  2.43833148e+00]],

       [[ 1.56413441e-02,  3.28806741e-02,  9.86932891e-01],
        [-3.79382327e+00,  2.37338798e+00,  2.43833148e+00]],

       [[ 1.95533855e-01,  1.63427135e-03,  2.49060459e+00],
        [-2.36483105e+00, -3.50504896e+00,  2.43833148e+00]]]), array([-153.39493759, -131.93233112, -118.60206907, -110.28631979]))
Service 123.cranebot-anchor-service.test_1._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Removed
Service 123.cranebot-anchor-service.test_0._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Removed
Service 123.cranebot-anchor-service.test_2._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Removed
Service 123.cranebot-anchor-service.test_3._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Removed
Service 123.cranebot-gripper-service.test._http._tcp.local. of type _http._tcp.local. state changed: ServiceStateChange.Removed
Removing service 123.cranebot-anchor-service.test_1. from dict_keys(['123.cranebot-anchor-service.test_1.', '123.cranebot-anchor-service.test_0.', '123.cranebot-anchor-service.test_2.', '123.cranebot-anchor-service.test_3.', '123.cranebot-gripper-service.test.'])

Wait for client shutdown
Removing service 123.cranebot-anchor-service.test_0. from dict_keys(['123.cranebot-anchor-service.test_1.', '123.cranebot-anchor-service.test_0.', '123.cranebot-anchor-service.test_2.', '123.cranebot-anchor-service.test_3.', '123.cranebot-gripper-service.test.'])

Wait for client shutdown
Removing service 123.cranebot-anchor-service.test_2. from dict_keys(['123.cranebot-anchor-service.test_1.', '123.cranebot-anchor-service.test_0.', '123.cranebot-anchor-service.test_2.', '123.cranebot-anchor-service.test_3.', '123.cranebot-gripper-service.test.'])

Wait for client shutdown
Removing service 123.cranebot-anchor-service.test_3. from dict_keys(['123.cranebot-anchor-service.test_1.', '123.cranebot-anchor-service.test_0.', '123.cranebot-anchor-service.test_2.', '123.cranebot-anchor-service.test_3.', '123.cranebot-gripper-service.test.'])

Wait for client shutdown
Removing service 123.cranebot-gripper-service.test. from dict_keys(['123.cranebot-anchor-service.test_1.', '123.cranebot-anchor-service.test_0.', '123.cranebot-anchor-service.test_2.', '123.cranebot-anchor-service.test_3.', '123.cranebot-gripper-service.test.'])

Wait for client shutdown
Client ('127.0.0.1', 36972) disconnected: Connection lost
Closing connection for client: ('127.0.0.1', 36972)
Client ('127.0.0.1', 42884) disconnected: Connection lost
Closing connection for client: ('127.0.0.1', 42884)
Client ('127.0.0.1', 43444) disconnected: Connection lost
Closing connection for client: ('127.0.0.1', 43444)
Client ('127.0.0.1', 46698) disconnected: [Errno 104] Connection reset by peer
Closing connection for client: ('127.0.0.1', 46698)
Finished client shutdown
Observer shutdown
Finished client shutdown
Finished client shutdown
Finished client shutdown
Finished client shutdown
stop
stop
stop
stop
stop
Stopping RPiCamMultiViewServer...
Server stop initiated.
Anchor server is configured to use mock camera on localhost:8889
Anchor server is configured to use mock camera on localhost:8888
Anchor server is configured to use mock camera on localhost:8890
Anchor server is configured to use mock camera on localhost:8891
Connected to ws://127.0.0.1:8766.
receive loop
Connected to ws://127.0.0.1:8765.
receive loop
Connected to ws://127.0.0.1:8767.
receive loop
Connected to ws://127.0.0.1:8768.
receive loop
RPiCamVidMock server task cancelled.
RPiCamVidMock server stopped.
Connected to ws://127.0.0.1:8764.
receive loop
Connection to 127.0.0.1 closed.
Client closing connection
Connection to 127.0.0.1 closed.
Client closing connection
Connection to 127.0.0.1 closed.
Client closing connection
Connection to 127.0.0.1 closed.
Client closing connection
Connection to 127.0.0.1 closed.
Client closing connection
.

=============================== warnings summary ===============================
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
integration_test.py::TestSystemIntegration::test_auto_calibration
  /usr/lib/python3.12/multiprocessing/popen_fork.py:66: DeprecationWarning: This process (pid=35774) is multi-threaded, use of fork() may lead to deadlocks in the child.
    self.pid = os.fork()

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
================== 1 passed, 8 warnings in 498.19s (0:08:18) ===================
